<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transa√ß√µes - Pouppi</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dark-bg': '#0B0F14',
                        'primary': '#20C997',
                        'secondary': '#A78BFA',
                        'accent': '#22D3EE',
                        'success': '#10B981',
                        'warning': '#F59E0B',
                        'danger': '#EF4444',
                        'card-bg': 'rgba(255, 255, 255, 0.05)',
                        'glass-border': 'rgba(255, 255, 255, 0.1)',
                        'sidebar-bg': 'rgba(15, 23, 42, 0.8)',
                    },
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Alpine.js -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .sidebar-glass {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Mobile Responsiveness - COMPLETE OPTIMIZATION */
        @media (max-width: 768px) {
            /* Hide sidebar on mobile */
            .sidebar-mobile {
                transform: translateX(-100%);
                transition: transform 0.3s ease-in-out;
            }
            
            .sidebar-mobile.open {
                transform: translateX(0);
            }
            
            /* Adjust main content for mobile */
            .main-content-mobile {
                margin-left: 0 !important;
                padding: 0.75rem !important;
            }
            
            /* Mobile menu button */
            .mobile-menu-btn {
                position: fixed;
                top: 1rem;
                left: 1rem;
                z-index: 50;
                background: rgba(32, 201, 151, 0.9);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.1);
                color: white;
                padding: 0.75rem;
                border-radius: 0.5rem;
                transition: all 0.3s ease;
            }
            
            .mobile-menu-btn:hover {
                background: rgba(32, 201, 151, 1);
                transform: scale(1.05);
            }
            
            /* Mobile sidebar overlay */
            .sidebar-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: 45;
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
            }
            
            .sidebar-overlay.open {
                opacity: 1;
                visibility: visible;
            }
            
            /* Mobile sidebar */
            .sidebar-mobile {
                position: fixed;
                top: 0;
                left: 0;
                height: 100vh;
                width: 280px;
                background: rgba(15, 23, 42, 0.95);
                backdrop-filter: blur(20px);
                border-right: 1px solid rgba(255, 255, 255, 0.1);
                z-index: 50;
                padding: 1rem;
                overflow-y: auto;
            }
            
            /* Mobile cards */
            .mobile-card {
                padding: 1rem !important;
                margin-bottom: 1rem !important;
            }
            
            /* Mobile grid layouts */
            .mobile-grid {
                grid-template-columns: 1fr !important;
                gap: 1rem !important;
            }
            
            /* Mobile titles */
            .mobile-title {
                font-size: 1.5rem !important;
            }
            
            .mobile-subtitle {
                font-size: 0.875rem !important;
            }
            
            /* Mobile navigation items */
            .mobile-nav-item {
                padding: 0.75rem 1rem !important;
                font-size: 0.875rem !important;
            }
            
            /* Mobile header optimization */
            .mobile-header {
                flex-direction: column !important;
                gap: 1rem !important;
                padding: 1rem !important;
            }
            
            .mobile-header-left {
                width: 100% !important;
                justify-content: space-between !important;
            }
            
            .mobile-header-right {
                width: 100% !important;
                flex-direction: column !important;
                gap: 0.75rem !important;
            }
            
            /* Mobile search bar */
            .mobile-search {
                width: 100% !important;
                max-width: none !important;
            }
            
            /* Mobile buttons */
            .mobile-button {
                width: 100% !important;
                justify-content: center !important;
                padding: 0.75rem 1rem !important;
                font-size: 0.875rem !important;
            }
            
            /* Mobile table optimization */
            .mobile-table-container {
                overflow-x: auto !important;
                -webkit-overflow-scrolling: touch !important;
            }
            
            .mobile-table {
                min-width: 600px !important;
                font-size: 0.875rem !important;
            }
            
            .mobile-table th,
            .mobile-table td {
                padding: 0.5rem 0.25rem !important;
                white-space: nowrap !important;
            }
            
            /* Mobile filters */
            .mobile-filters {
                flex-direction: column !important;
                gap: 0.75rem !important;
            }
            
            .mobile-filter-item {
                width: 100% !important;
            }
            
            .mobile-filter-select {
                width: 100% !important;
                padding: 0.75rem !important;
                font-size: 0.875rem !important;
            }
            
            /* Mobile transaction cards */
            .mobile-transaction-card {
                padding: 0.75rem !important;
                margin-bottom: 0.5rem !important;
            }
            
            .mobile-transaction-text {
                font-size: 0.875rem !important;
            }
            
            .mobile-transaction-amount {
                font-size: 1rem !important;
            }
            
            /* Mobile export buttons */
            .mobile-export-grid {
                grid-template-columns: 1fr !important;
                gap: 0.75rem !important;
            }
            
            .mobile-export-button {
                width: 100% !important;
                padding: 0.75rem !important;
                font-size: 0.875rem !important;
            }
            
            /* Mobile dropdown */
            .mobile-dropdown {
                width: 100% !important;
                margin-top: 0.5rem !important;
            }
            
            /* Mobile user profile */
            .mobile-user-profile {
                flex-direction: column !important;
                text-align: center !important;
                padding: 0.75rem !important;
            }
            
            .mobile-user-avatar {
                margin: 0 auto 0.5rem auto !important;
            }
        }
        
        /* Extra small screens */
        @media (max-width: 480px) {
            .main-content-mobile {
                padding: 0.5rem !important;
            }
            
            .mobile-title {
                font-size: 1.25rem !important;
            }
            
            .mobile-table {
                min-width: 500px !important;
                font-size: 0.8rem !important;
            }
            
            .mobile-table th,
            .mobile-table td {
                padding: 0.375rem 0.125rem !important;
            }
            
            .mobile-button {
                padding: 0.625rem 0.75rem !important;
                font-size: 0.8rem !important;
            }
            
            .mobile-transaction-text {
                font-size: 0.8rem !important;
            }
            
            .mobile-transaction-amount {
                font-size: 0.875rem !important;
            }
        }
        
        
        .gradient-bg {
            background: linear-gradient(135deg, #0B0F14 0%, #1A1F2E 100%);
        }
        
        .gradient-mesh {
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(32, 201, 151, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(167, 139, 250, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(34, 211, 238, 0.1) 0%, transparent 50%);
        }
        
        .profile-photo {
            object-fit: cover;
        }
        
        .transaction-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .focus-ring:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(32, 201, 151, 0.3);
        }
    </style>
</head>

<body class="bg-dark-bg text-white font-inter gradient-bg gradient-mesh min-h-screen" x-data="transacoesApp()" x-init="init()">
    <!-- Sidebar -->
    <div class="fixed inset-y-0 left-0 w-64 sidebar-glass z-50">
        <div class="flex flex-col h-full">
            <!-- Logo -->
            <div class="flex items-center space-x-3 px-6 py-6">
                <div class="w-10 h-10 bg-primary rounded-full flex items-center justify-center">
                    <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                </div>
                <div>
                    <h1 class="text-xl font-bold text-white">Pouppi</h1>
                    <p class="text-sm text-gray-400">Dashboard Financeiro</p>
                </div>
            </div>
            
            
            <!-- Navigation -->
            <nav class="flex-1 px-4 py-6 space-y-2">
                <a href="dashboard.html" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-300 hover:bg-white hover:bg-opacity-10 transition-colors">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                    </svg>
                    <span>Dashboard</span>
                </a>
                
                
                <a href="transacoes.html" class="flex items-center space-x-3 px-4 py-3 rounded-lg bg-primary text-white">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                    <span>Transa√ß√µes</span>
                </a>
                
                <a href="relatorios.html" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-300 hover:bg-white hover:bg-opacity-10 transition-colors">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                    <span>Relat√≥rios</span>
                </a>
                
                <a href="configuracoes.html" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-300 hover:bg-white hover:bg-opacity-10 transition-colors">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                    <span>Configura√ß√µes</span>
                </a>
                
                <a href="tutorial.html" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-300 hover:bg-white hover:bg-opacity-10 transition-colors">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                    <span>Guia Pr√°tico</span>
                </a>
                
                <a href="feedback.html" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-300 hover:bg-white hover:bg-opacity-10 transition-colors">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                    <span>Feedback</span>
                </a>
            </nav>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="ml-64 min-h-screen main-content-mobile">
        <!-- Header -->
        <div class="glass-strong border-b border-glass-border px-8 py-6 mobile-header">
            <div class="flex items-center justify-between mobile-header-left">
                <div class="flex items-center space-x-4">
                    <h1 class="text-3xl font-bold text-white mobile-title">Transa√ß√µes</h1>
                    <div class="flex items-center space-x-2">
                        <span class="text-lg font-semibold text-white mobile-subtitle" x-text="filteredTransactions.length"></span>
                        <span class="text-sm text-gray-400 mobile-subtitle">transa√ß√µes</span>
                    </div>
                </div>
                
                <div class="flex items-center space-x-4 mobile-header-right">
                    <!-- Export Buttons -->
                    <div class="flex items-center space-x-2 mobile-export-grid">
                        <button @click="exportData('pdf')" class="bg-gradient-to-r from-red-500 to-red-600 text-white px-4 py-2 rounded-lg font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-200 mobile-export-button">
                            <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                            </svg>
                            PDF
                        </button>
                        
                        <button @click="exportData('excel')" class="bg-gradient-to-r from-green-500 to-green-600 text-white px-4 py-2 rounded-lg font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-200 mobile-export-button">
                            <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                            </svg>
                            Excel
                        </button>
                        
                        <button @click="exportData('xml')" class="bg-gradient-to-r from-orange-500 to-orange-600 text-white px-4 py-2 rounded-lg font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-200 mobile-export-button">
                            <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                            </svg>
                            XML
                        </button>
                    </div>
                    
                    <!-- Filter Button -->
                    <button @click="showFilters = !showFilters" class="flex items-center space-x-2 glass px-4 py-2 rounded-lg hover:bg-white hover:bg-opacity-10 transition-colors mobile-button">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
                        </svg>
                        <span>Filtros</span>
                    </button>
                    
                    <!-- User Avatar -->
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 rounded-full border-2 border-primary bg-primary flex items-center justify-center text-white font-bold text-lg"
                             x-text="userProfile.name.charAt(0)"></div>
                        <div>
                            <p class="text-white font-medium" x-text="userProfile.name"></p>
                            <p class="text-xs text-gray-400" x-text="userProfile.role"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Filters Panel -->
        <div x-show="showFilters" x-transition class="glass-strong rounded-2xl p-6 mb-6 mx-8 mt-6 mobile-card">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mobile-filters">
                <!-- Date Range -->
                <div class="mobile-filter-item">
                    <label class="block text-sm font-medium text-gray-300 mb-2">Per√≠odo</label>
                    <select x-model="filters.dateRange" class="w-full px-3 py-2 glass rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary bg-dark-bg border border-glass-border mobile-filter-select">
                        <option value="all" class="bg-dark-bg text-white">Todos os per√≠odos</option>
                        <option value="today" class="bg-dark-bg text-white">Hoje</option>
                        <option value="week" class="bg-dark-bg text-white">Esta semana</option>
                        <option value="month" class="bg-dark-bg text-white">Este m√™s</option>
                        <option value="year" class="bg-dark-bg text-white">Este ano</option>
                        <option value="custom" class="bg-dark-bg text-white">Personalizado</option>
                    </select>
                </div>
                
                <!-- Transaction Type -->
                <div class="mobile-filter-item">
                    <label class="block text-sm font-medium text-gray-300 mb-2">Tipo</label>
                    <select x-model="filters.type" class="w-full px-3 py-2 glass rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary bg-dark-bg border border-glass-border mobile-filter-select">
                        <option value="all" class="bg-dark-bg text-white">Todos os tipos</option>
                        <option value="Receita" class="bg-dark-bg text-white">Receitas</option>
                        <option value="Despesa" class="bg-dark-bg text-white">Despesas</option>
                    </select>
                </div>
                
                <!-- Category -->
                <div class="mobile-filter-item">
                    <label class="block text-sm font-medium text-gray-300 mb-2">Categoria</label>
                    <select x-model="filters.category" class="w-full px-3 py-2 glass rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary bg-dark-bg border border-glass-border mobile-filter-select">
                        <option value="all" class="bg-dark-bg text-white">Todas as categorias</option>
                        <option value="alimenta√ß√£o" class="bg-dark-bg text-white">Alimenta√ß√£o</option>
                        <option value="transporte" class="bg-dark-bg text-white">Transporte</option>
                        <option value="lazer" class="bg-dark-bg text-white">Lazer</option>
                        <option value="outros" class="bg-dark-bg text-white">Outros</option>
                    </select>
                </div>
                
                <!-- Amount Range -->
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">Valor</label>
                    <select x-model="filters.amountRange" class="w-full px-3 py-2 glass rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary bg-dark-bg border border-glass-border">
                        <option value="all" class="bg-dark-bg text-white">Qualquer valor</option>
                        <option value="0-50" class="bg-dark-bg text-white">R$ 0 - R$ 50</option>
                        <option value="50-200" class="bg-dark-bg text-white">R$ 50 - R$ 200</option>
                        <option value="200-500" class="bg-dark-bg text-white">R$ 200 - R$ 500</option>
                        <option value="500+" class="bg-dark-bg text-white">R$ 500+</option>
                    </select>
                </div>
            </div>
            
            <div class="flex justify-end space-x-4 mt-4">
                <button @click="clearFilters" class="px-4 py-2 text-gray-400 hover:text-white transition-colors">
                    Limpar Filtros
                </button>
                <button @click="applyFilters" class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-opacity-80 transition-colors">
                    Aplicar Filtros
                </button>
            </div>
        </div>
        
        <!-- Transactions List -->
        <div class="p-8">
            <div class="glass-strong rounded-2xl overflow-hidden">
                <div class="px-6 py-4 border-b border-glass-border flex items-center justify-between">
                    <h3 class="text-lg font-semibold text-white">Lista de Transa√ß√µes</h3>
                    <select x-model="sortBy" class="px-3 py-2 glass rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary bg-dark-bg border border-glass-border">
                        <option value="date-desc" class="bg-dark-bg text-white">Data (mais recente)</option>
                        <option value="date-asc" class="bg-dark-bg text-white">Data (mais antiga)</option>
                        <option value="amount-desc" class="bg-dark-bg text-white">Valor (maior)</option>
                        <option value="amount-asc" class="bg-dark-bg text-white">Valor (menor)</option>
                    </select>
                </div>
                
                <div class="overflow-x-auto mobile-table-container">
                    <table class="w-full mobile-table">
                        <thead class="bg-glass-border">
                            <tr>
                                <th class="text-left py-3 px-4 text-gray-400 font-medium">Data</th>
                                <th class="text-left py-3 px-4 text-gray-400 font-medium">Descri√ß√£o</th>
                                <th class="text-left py-3 px-4 text-gray-400 font-medium">Categoria</th>
                                <th class="text-left py-3 px-4 text-gray-400 font-medium">Tipo</th>
                                <th class="text-right py-3 px-4 text-gray-400 font-medium">Valor</th>
                                <th class="text-center py-3 px-4 text-gray-400 font-medium">A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-glass-border">
                            <template x-for="transaction in filteredTransactions" :key="transaction.id">
                                <tr class="transaction-item hover:bg-white hover:bg-opacity-5 mobile-transaction-card">
                                    <td class="py-4 px-4 text-gray-300 mobile-transaction-text" x-text="formatDate(transaction.date)"></td>
                                    <td class="py-4 px-4 text-white font-medium mobile-transaction-text" x-text="transaction.description"></td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium"
                                              :class="getCategoryColor(transaction.category)"
                                              x-text="transaction.category"></span>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium"
                                              :class="transaction.type === 'Receita' ? 'bg-emerald-500 bg-opacity-20 text-emerald-400' : 'bg-orange-500 bg-opacity-20 text-orange-400'"
                                              x-text="transaction.type"></span>
                                    </td>
                                    <td class="py-4 px-4 text-right">
                                        <span class="font-semibold text-lg mobile-transaction-amount"
                                              :class="transaction.type === 'Receita' ? 'text-emerald-400' : 'text-orange-400'"
                                              x-text="(transaction.type === 'Receita' ? '+' : '-') + 'R$ ' + transaction.amount.toLocaleString('pt-BR', {minimumFractionDigits: 2})"></span>
                                    </td>
                                    <td class="py-4 px-4 text-center">
                                        <div class="flex items-center justify-center space-x-2">
                                            <button @click="editTransaction(transaction)" class="text-primary hover:text-accent transition-colors">
                                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                                                </svg>
                                            </button>
                                            <button @click="deleteTransaction(transaction.id)" class="text-danger hover:text-red-300 transition-colors">
                                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                                    <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                                                </svg>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                    
                    <!-- Empty State -->
                    <div x-show="filteredTransactions.length === 0" class="text-center py-12">
                        <svg class="w-16 h-16 text-gray-400 mx-auto mb-4" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                        <h3 class="text-lg font-medium text-white mb-2">Nenhuma transa√ß√£o encontrada</h3>
                        <p class="text-gray-400">Tente ajustar os filtros ou adicione uma nova transa√ß√£o.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function transacoesApp() {
            return {
                userProfile: {
                    name: '',
                    role: '',
                    avatar: null,
                    whatsapp: '',
                    isAdmin: false
                },
                
                showFilters: false,
                sortBy: 'date-desc',
                loading: true,
                error: null,
                
                filters: {
                    dateRange: 'all',
                    type: 'all',
                    category: 'all',
                    amountRange: 'all'
                },
                
                transactions: [],

                // Configura√ß√µes da API
                apiBaseUrl: '/api',

                async init() {
                    console.log('üöÄ === INICIANDO TRANSA√á√ïES ===');
                    console.log('Timestamp:', new Date().toISOString());

                    // LIMPAR dados antigos
                    this.transactions = [];
                    console.log('‚úÖ Array transactions limpo');

                    // Verificar se usu√°rio est√° logado
                    if (!localStorage.getItem('isLoggedIn')) {
                        console.log('‚ùå Usu√°rio n√£o logado, redirecionando...');
                        window.location.href = 'login_auth.html';
                        return;
                    }

                    console.log('‚úÖ Usu√°rio est√° logado');

                    // Carregar dados do perfil
                    const nome = localStorage.getItem('nome');
                    const perfil = localStorage.getItem('perfil');
                    this.userProfile.name = nome || 'Usu√°rio';
                    this.userProfile.role = perfil === 'admin' ? 'Administrador' : 'Usu√°rio Pouppi';

                    console.log('‚úÖ Perfil carregado:', this.userProfile);

                    await this.carregarTransacoes();

                    console.log('‚úÖ Total de transactions ap√≥s carregar:', this.transactions.length);
                    console.log('‚úÖ Primeiras 3 transactions:', this.transactions.slice(0, 3));

                    this.loading = false;
                    console.log('üöÄ === INIT COMPLETO ===');
                },

                async carregarTransacoes() {
                    console.log('üîÑ Carregando transa√ß√µes da API...');

                    try {
                        // Buscar transa√ß√µes da API REST
                        const response = await fetch(`${this.apiBaseUrl}/transacoes-real.php`, {
                            method: 'GET',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            credentials: 'include'
                        });

                        console.log('üì° Response status:', response.status);

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        const data = await response.json();
                        console.log('üì¶ Dados recebidos:', data);

                        if (data.success && data.transacoes) {
                            // Atualizar perfil do usu√°rio com dados da API (igual dashboard.html)
                            if (data.cliente) {
                                this.userProfile.name = data.cliente.nome || 'Usu√°rio';
                                this.userProfile.whatsapp = data.cliente.whatsapp;
                                this.userProfile.isAdmin = (data.cliente.perfil === 'admin');
                                this.userProfile.role = data.cliente.perfil === 'admin' ? 'Administrador' : 'Usu√°rio Pouppi';
                                console.log('‚úÖ Perfil atualizado com dados da API:', this.userProfile);
                            }

                            this.transactions = data.transacoes.map(t => ({
                                id: t.id,
                                description: t.observation || `${t.category || 'Outros'} - ${t.type || 'N/A'}`,
                                amount: parseFloat(t.valor_movimentacao || 0),
                                type: (t.type || '').toLowerCase() === 'receita' ? 'Receita' : 'Despesa',
                                category: t.category || 'Outros',
                                date: t.data_movimentacao,
                                time: t.updated_at || t.created_at || new Date().toISOString(),
                                status: 'Conclu√≠do'
                            }));

                            console.log('‚úÖ Transa√ß√µes carregadas:', this.transactions.length);
                            console.log('‚úÖ Primeiras 3:', this.transactions.slice(0, 3));
                        } else {
                            console.error('‚ùå API retornou success=false ou sem transacoes');
                            this.transactions = [];
                        }

                    } catch (error) {
                        console.error('‚ùå ERRO ao carregar transa√ß√µes:', error);
                        this.transactions = [];
                    }
                },
                
                // Fun√ß√£o de demonstra√ß√£o removida - sistema usa apenas dados reais da API
                
                get filteredTransactions() {
                    let filtered = [...this.transactions];
                    
                    // Apply filters
                    if (this.filters.type !== 'all') {
                        filtered = filtered.filter(t => t.type === this.filters.type);
                    }
                    
                    if (this.filters.category !== 'all') {
                        filtered = filtered.filter(t => t.category === this.filters.category);
                    }
                    
                    // Apply sorting
                    if (this.sortBy === 'date-desc') {
                        filtered.sort((a, b) => new Date(b.date) - new Date(a.date));
                    } else if (this.sortBy === 'date-asc') {
                        filtered.sort((a, b) => new Date(a.date) - new Date(b.date));
                    } else if (this.sortBy === 'amount-desc') {
                        filtered.sort((a, b) => b.amount - a.amount);
                    } else if (this.sortBy === 'amount-asc') {
                        filtered.sort((a, b) => a.amount - b.amount);
                    }
                    
                    return filtered;
                },
                
                init() {
                    // Check if user is logged in
                    if (!localStorage.getItem('isLoggedIn')) {
                        window.location.href = 'login.html';
                        return;
                    }
                    
                    // Load user data
                    const user = JSON.parse(localStorage.getItem('user') || '{}');
                    this.userProfile.name = user.name || 'Usu√°rio';
                    this.userProfile.role = user.role || 'Usu√°rio Poupa.Ai';
                },
                
                formatDate(dateString) {
                    const date = new Date(dateString);
                    return date.toLocaleDateString('pt-BR');
                },
                
                getCategoryColor(category) {
                    const colors = {
                        'alimenta√ß√£o': 'bg-emerald-500 bg-opacity-20 text-emerald-400',
                        'transporte': 'bg-blue-500 bg-opacity-20 text-blue-400',
                        'lazer': 'bg-purple-500 bg-opacity-20 text-purple-400',
                        'outros': 'bg-gray-500 bg-opacity-20 text-gray-400'
                    };
                    return colors[category] || 'bg-gray-500 bg-opacity-20 text-gray-400';
                },
                
                editTransaction(transaction) {
                    // In a real app, this would open an edit modal
                    console.log('Edit transaction:', transaction);
                },
                
                deleteTransaction(id) {
                    if (confirm('Tem certeza que deseja excluir esta transa√ß√£o?')) {
                        this.transactions = this.transactions.filter(t => t.id !== id);
                    }
                },
                
                clearFilters() {
                    this.filters = {
                        dateRange: 'all',
                        type: 'all',
                        category: 'all',
                        amountRange: 'all'
                    };
                },
                
                applyFilters() {
                    this.showFilters = false;
                },
                
                exportData(format) {
                    const data = {
                        transactions: this.filteredTransactions,
                        generatedAt: new Date().toISOString(),
                        totalTransactions: this.filteredTransactions.length
                    };
                    
                    switch(format) {
                        case 'pdf':
                            this.exportToPDF(data);
                            break;
                        case 'excel':
                            this.exportToExcel(data);
                            break;
                        case 'xml':
                            this.exportToXML(data);
                            break;
                    }
                },
                
                exportToPDF(data) {
                    // Create HTML content for PDF
                    const htmlContent = `
                        <!DOCTYPE html>
                        <html>
                        <head>
                            <meta charset="UTF-8">
                            <title>Relat√≥rio de Transa√ß√µes - Pouppi</title>
                            <style>
                                body { font-family: Arial, sans-serif; margin: 20px; }
                                h1 { color: #20C997; text-align: center; }
                                h2 { color: #333; border-bottom: 2px solid #20C997; }
                                table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                                th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                                th { background-color: #20C997; color: white; }
                                .receita { color: #10B981; font-weight: bold; }
                                .despesa { color: #F59E0B; font-weight: bold; }
                                .summary { background-color: #f5f5f5; padding: 15px; margin: 20px 0; border-radius: 5px; }
                            </style>
                        </head>
                        <body>
                            <h1>Relat√≥rio de Transa√ß√µes - Pouppi</h1>
                            <p><strong>Gerado em:</strong> ${new Date().toLocaleDateString('pt-BR')}</p>
                            
                            <div class="summary">
                                <h2>Resumo</h2>
                                <p><strong>Total de Transa√ß√µes:</strong> ${data.totalTransactions}</p>
                            </div>
                            
                            <h2>Lista de Transa√ß√µes</h2>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Data</th>
                                        <th>Descri√ß√£o</th>
                                        <th>Categoria</th>
                                        <th>Tipo</th>
                                        <th>Valor</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${data.transactions.map(t => `
                                        <tr>
                                            <td>${t.date}</td>
                                            <td>${t.description}</td>
                                            <td>${t.category}</td>
                                            <td>${t.type}</td>
                                            <td class="${t.type === 'Receita' ? 'receita' : 'despesa'}">
                                                ${t.type === 'Receita' ? '+' : '-'}R$ ${t.amount.toLocaleString('pt-BR', {minimumFractionDigits: 2})}
                                            </td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </body>
                        </html>
                    `;
                    
                    const blob = new Blob([htmlContent], { type: 'text/html' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `transacoes-${new Date().toISOString().split('T')[0]}.html`;
                    a.click();
                    URL.revokeObjectURL(url);
                },
                
                exportToExcel(data) {
                    const headers = ['Data', 'Descri√ß√£o', 'Categoria', 'Tipo', 'Valor'];
                    const csvContent = [
                        headers.join(','),
                        ...data.transactions.map(t => [
                            t.date,
                            `"${t.description}"`,
                            t.category,
                            t.type,
                            t.amount.toFixed(2)
                        ].join(','))
                    ].join('\n');
                    
                    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `transacoes-${new Date().toISOString().split('T')[0]}.csv`;
                    a.click();
                    URL.revokeObjectURL(url);
                },
                
                exportToXML(data) {
                    const xmlContent = `<?xml version="1.0" encoding="UTF-8"?>
<transacoes>
    <cabecalho>
        <titulo>Relat√≥rio de Transa√ß√µes - Pouppi</titulo>
        <geradoEm>${new Date().toISOString()}</geradoEm>
        <totalTransacoes>${data.totalTransactions}</totalTransacoes>
    </cabecalho>
    <lista>
        ${data.transactions.map(t => `
        <transacao>
            <id>${t.id}</id>
            <data>${t.date}</data>
            <descricao>${t.description}</descricao>
            <categoria>${t.category}</categoria>
            <tipo>${t.type}</tipo>
            <valor>${t.amount}</valor>
        </transacao>`).join('')}
    </lista>
</transacoes>`;
                    
                    const blob = new Blob([xmlContent], { type: 'application/xml' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `transacoes-${new Date().toISOString().split('T')[0]}.xml`;
                    a.click();
                    URL.revokeObjectURL(url);
                }
            }
        }
    </script>
</body>
</html>
